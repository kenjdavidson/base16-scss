/**
 * Required variable creation based on builder specification
 * https://github.com/chriskempson/base16/blob/master/builder.md
 */ 
 
/**
 * Add all extra variables to provided $colormap.
 */
@function add-color-vars($colormap) {
  @each $name,$color in $colormap {
    $colormap = map-merge($colormap, (
      #{$name}-hex-r: str-slice($color, 1, 2),
      #{$name}-hex-g: str-slice($color, 3, 4),
      #{$name}-hex-b: str-slice($color, 5, 6)
    );
    $colormap = map-merge($colormap, (
      #{$name}-rgb-r: hex-to-rgb(map-get($colormap, #{$name}-hex-r)),
      #{$name}-rgb-g: hex-to-rgb(map-get($colormap, #{$name}-hex-g)),
      #{$name}-rgb-b: hex-to-rgb(map-get($colormap, #{$name}-hex-b))
    ));
  }  
  return $colormap;
}

/**
 * Convert hex value to rgb (integer).
 */
@function hex-to-rgb($hex) {
  $digits = '0123456789ABCDEF';
  $hex = string.to-upper-case($hex);
  $dec = 0;
  
  @for $i from 1 through string.length($hex) {
    $digit = string.substring($hex, $i, $i);
    $val = string.index($digits, $digit)-1;
    $dec = 16*$dec + $val;
  }
  
  return $dec;
}
