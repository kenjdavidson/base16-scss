/**
 * Required variable creation based on builder specification
 * https://github.com/chriskempson/base16/blob/master/builder.md
 */ 
 
/**
 * Add all extra variables to provided $colormap.
 */
@function add-color-vars($colormap) {
  @each $name,$color in $colormap {
    $colormap = map-merge($colormap, (
      #{$name}-hex-r: str-slice($color, 1, 2),
      #{$name}-hex-g: str-slice($color, 3, 4),
      #{$name}-hex-b: str-slice($color, 5, 6)
    );
    $colormap = map-merge($colormap, (
      #{$name}-rgb-r: hex-to-rgb(map-get($colormap, #{$name}-hex-r)),
      #{$name}-rgb-g: hex-to-rgb(map-get($colormap, #{$name}-hex-g)),
      #{$name}-rgb-b: hex-to-rgb(map-get($colormap, #{$name}-hex-b))
    ));
  }  
  return $colormap;
}

/**
 * Convert hex value to rgb (integer).
 */
@function hex-to-rgb($hex) {
  $chars = '0123456789ABCDEF';
  $dec = 0;
  
  @for $i from 0 through string.length($hex) {
    $val = string.substring($hex, $i+1, $i+2);
    $index = string.index($chars, $val);
    $dec = ($i * 16) + $dec;
  }
  
  return $dec;
}
